<div class="px-8 py-6">
  <!-- Header -->
  <div
    class="flex flex-col sm:flex-row items-start justify-between sm:space-x-4 w-full mb-6"
  >
    <h1 class="text-2xl xl:text-4xl font-semibold text-blue-600">
      Kelola Pengguna
    </h1>
    <button
      [routerLink]="'create'"
      class="group relative mt-4 sm:mt-0 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-5 py-3 rounded-xl shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 flex items-center space-x-3 font-semibold overflow-hidden"
    >
      <!-- Glow Background Effect -->
      <span
        class="absolute inset-0 w-full h-full bg-white/10 opacity-0 group-hover:opacity-100 transition duration-300"
      ></span>

      <!-- Icon -->
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="currentColor"
        class="size-6"
      >
        <path
          d="M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z"
        />
      </svg>

      <!-- Text -->
      <span class="relative">Tambah Pengguna</span>
    </button>
  </div>

  <!-- Search Box -->
  <div class="mb-4">
    <input
      type="text"
      [(ngModel)]="searchTerm"
      (input)="onSearchChange($event)"
      placeholder="Cari Pengguna berdasarkan username, nama, atau email..."
      class="w-full sm:w-1/2 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
    />
  </div>

  <!-- Message -->
  <div
    *ngIf="successMessage"
    class="flex items-center p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-100 border border-green-300 shadow-md"
    role="alert"
  >
    <svg
      class="flex-shrink-0 inline w-5 h-5 me-3 text-green-600"
      fill="currentColor"
      viewBox="0 0 20 20"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fill-rule="evenodd"
        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.707a1 1 0 00-1.414-1.414L9 10.586 7.707 
      9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 
      0l4-4z"
        clip-rule="evenodd"
      ></path>
    </svg>
    <span class="font-medium">{{ successMessage }}</span>
  </div>

  <!-- User Table -->
  <div class="overflow-hidden bg-white shadow-xl rounded-2xl mt-10">
    <div class="overflow-x-auto">
      <table class="min-w-full text-sm text-left">
        <thead
          class="bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 sticky top-0 z-10"
        >
          <tr>
            <th class="px-6 py-3 font-semibold uppercase tracking-wider">
              Username
            </th>
            <th class="px-6 py-3 font-semibold uppercase tracking-wider">
              Nama
            </th>
            <th class="px-6 py-3 font-semibold uppercase tracking-wider">
              Email
            </th>
            <th
              class="px-6 py-3 font-semibold text-center uppercase tracking-wider"
            >
              Aksi
            </th>
          </tr>
        </thead>

        <tbody class="divide-y divide-gray-200">
          <!-- Row dinamis -->
          <tr
            *ngFor="let user of users; let i = index"
            class="hover:bg-gray-50 transition duration-200 odd:bg-white even:bg-gray-50"
          >
            <td class="px-6 py-4 whitespace-nowrap text-gray-800">
              {{ user.username }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-gray-800">
              {{ user.fullname }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-gray-800">
              {{ user.email }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="flex justify-center gap-2">
                <!-- Edit -->
                <button
                  [routerLink]="[
                    '/gas/settings/users/user-management/edit',
                    user.id
                  ]"
                  class="flex items-center gap-1 px-3 py-1 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white transition"
                  title="Edit"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-4 h-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15.232 5.232l3.536 3.536M9 11l-4 4v4h4l10-10-4-4-10 10z"
                    />
                  </svg>
                  <span>Edit</span>
                </button>

                <!-- Delete -->
                <button
                  (click)="openDeleteModal(user)"
                  class="flex items-center gap-1 px-3 py-1 rounded-lg bg-red-50 text-red-600 hover:bg-red-600 hover:text-white transition"
                  title="Delete"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-4 h-4"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M6 18L18 6M6 6l12 12"
                    />
                  </svg>
                  <span>Delete</span>
                </button>
              </div>
            </td>
          </tr>

          <!-- Empty State -->
          <tr *ngIf="users.length === 0">
            <td colspan="4" class="px-6 py-10 text-center">
              <div
                class="flex flex-col items-center justify-center space-y-3 text-gray-500"
              >
                <!-- Icon -->
                <div class="bg-gray-100 p-4 rounded-full shadow-sm">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-10 h-10 text-gray-400"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M12 2.25c-5.385 0-9.75 4.365-9.75 
            9.75s4.365 9.75 9.75 9.75 9.75-4.365 
            9.75-9.75S17.385 2.25 12 2.25Zm-2.625 
            6c-.54 0-.828.419-.936.634a1.96 1.96 
            0 0 0-.189.866c0 .298.059.605.189.866.108.215.395.634.936.634.54 
            0 .828-.419.936-.634.13-.26.189-.568.189-.866 
            0-.298-.059-.605-.189-.866-.108-.215-.395-.634-.936-.634Zm4.314.634c.108-.215.395-.634.936-.634.54 
            0 .828.419.936.634.13.26.189.568.189.866 
            0 .298-.059.605-.189.866-.108.215-.395.634-.936.634-.54 
            0-.828-.419-.936-.634a1.96 1.96 0 0 1-.189-.866c0-.298.059-.605.189-.866Zm-4.34 
            7.964a.75.75 0 0 1-1.061-1.06 
            5.236 5.236 0 0 1 3.73-1.538 
            5.236 5.236 0 0 1 3.695 
            1.538.75.75 0 1 1-1.061 
            1.06 3.736 3.736 0 0 0-2.639-1.098 
            3.736 3.736 0 0 0-2.664 1.098Z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>

                <!-- Text -->
                <p class="text-lg font-semibold">Oops, tidak ada pengguna!</p>
                <p class="text-sm text-gray-400">
                  Coba tambahkan user baru untuk memulai
                </p>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-between p-4 border-t bg-gray-50">
      <button
        (click)="goToPage(page - 1)"
        [disabled]="page === 1"
        class="px-3 py-1 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        ← Prev
      </button>

      <span class="text-sm text-gray-600">
        Halaman <span class="font-semibold">{{ page }}</span> dari
        <span class="font-semibold">{{ totalPages }}</span>
      </span>

      <button
        (click)="goToPage(page + 1)"
        [disabled]="page === totalPages"
        class="px-3 py-1 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Next →
      </button>
    </div>
  </div>
</div>
<!-- Modal Delete -->
<div
  *ngIf="showDeleteModal"
  class="fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50"
>
  <!-- Animasi modal -->
  <div
    class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6 transform transition-all duration-300 scale-95 animate-fadeIn"
  >
    <!-- Header -->
    <div class="flex items-center gap-3 mb-4">
      <div
        class="flex items-center justify-center w-10 h-10 rounded-full bg-red-100 text-red-600"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="currentColor"
          class="size-6"
        >
          <path
            d="M10.375 2.25a4.125 4.125 0 1 0 0 8.25 4.125 4.125 0 0 0 0-8.25ZM10.375 12a7.125 7.125 0 0 0-7.124 7.247.75.75 0 0 0 .363.63 13.067 13.067 0 0 0 6.761 1.873c2.472 0 4.786-.684 6.76-1.873a.75.75 0 0 0 .364-.63l.001-.12v-.002A7.125 7.125 0 0 0 10.375 12ZM16 9.75a.75.75 0 0 0 0 1.5h6a.75.75 0 0 0 0-1.5h-6Z"
          />
        </svg>
      </div>
      <h2 class="text-xl font-semibold text-gray-800">Konfirmasi Hapus</h2>
    </div>

    <!-- Body -->
    <p class="text-gray-600 mb-6 leading-relaxed">
      Apakah Anda yakin ingin menghapus
      <span class="font-bold text-red-600">{{ selectedUser?.fullname }}</span
      >? Tindakan ini tidak dapat dibatalkan.
    </p>

    <!-- Footer -->
    <div class="flex justify-end gap-3">
      <button
        (click)="cancelDelete()"
        class="px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300 transition"
      >
        Batal
      </button>
      <button
        (click)="confirmDelete()"
        class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 shadow-md transition"
      >
        <i class="fas fa-trash-alt mr-2"></i> Hapus
      </button>
    </div>
  </div>
</div>
